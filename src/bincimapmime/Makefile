# @(#$Id: Makefile,v 1.6 2006-01-19 12:01:42 dockes Exp $  (C) 2005 J.F.Dockes

depth = ..
include $(depth)/mk/sysconf

LIBS = libmime.a
PROGS = trbinc

all: depend $(LIBS) 

SRCS = mime-getpart.cc mime-parsefull.cc mime-parseonlyheader.cc \
     mime-printbody.cc mime-printdoc.cc mime-printheader.cc mime.cc \
     convert.cc iodevice.cc iofactory.cc

OBJS = mime-getpart.o mime-parsefull.o mime-parseonlyheader.o \
     mime-printbody.o mime-printdoc.o mime-printheader.o mime.o  \
     convert.o iodevice.o iofactory.o

libmime.a : $(OBJS)
	 $(AR) ru libmime.a $(OBJS)

.cc.o:
	$(CXX) $(ALL_CXXFLAGS) -c $<

TRBINCOBJS = trbinc.o
trbinc: trbinc.o
	$(CXX) -o trbinc trbinc.o libmime.a 

depend: alldeps.stamp
alldeps.stamp : $(SRCS)
	$(CXX) -M $(ALL_CXXFLAGS) $(SRCS) > alldeps
	touch alldeps.stamp

clean:
	cp /dev/null alldeps
	rm -f alldeps.stamp
	rm -f ${LIBS} ${PROGS} ${OBJS}

include alldeps
