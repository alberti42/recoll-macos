
More documentation can be found in the doc/ directory or at http://www.recoll.org


                               Recoll user manual

  Jean-Francois Dockes

   <jean-francois.dockes@wanadoo.fr>

   Copyright (c) 2005 Jean-Francois Dockes

   This document introduces full text search notions and describes the
   installation and use of the Recoll application. It currently describes
   Recoll 1.9.

   [ Split HTML / Single HTML ]

     ----------------------------------------------------------------------

   Table of Contents

   1. Introduction

                1.1. Giving it a try

                1.2. Full text search

                1.3. Recoll overview

   2. Indexing

                2.1. Introduction

                2.2. Index storage

                             2.2.1. Index formats

                             2.2.2. Security aspects

                2.3. The indexing configuration

                2.4. Periodic indexing

                             2.4.1. Starting indexing

                             2.4.2. Using cron to automate indexing

                2.5. Real time indexing

   3. Searching

                3.1. Simple search

                3.2. The result list

                             3.2.1. The result list right-click menu

                3.3. The preview window

                3.4. The query language

                3.5. Complex/advanced search

                3.6. The term explorer tool

                3.7. More about wildcards

                3.8. Multiple databases

                3.9. Document history

                3.10. Sorting search results

                3.11. Search tips, shortcuts

                3.12. Customizing the search interface

   4. Installation

                4.1. Installing a prebuilt copy

                             4.1.1. Installing through a package system

                             4.1.2. Installing a prebuilt Recoll

                4.2. Supporting packages

                4.3. Building from source

                             4.3.1. Prerequisites

                             4.3.2. Building

                             4.3.3. Installation

                4.4. Configuration overview

                             4.4.1. Main configuration file

                             4.4.2. The mimemap file

                             4.4.3. The mimeconf file

                             4.4.4. The mimeview file

                             4.4.5. Examples of configuration adjustments

                4.5. Extending Recoll

                             4.5.1. Writing a document filter

     ----------------------------------------------------------------------

                            Chapter 1. Introduction

1.1. Giving it a try

   If you do not like reading manuals (who does?) and would like to give
   Recoll a try, just perform installation and start the recoll user
   interface, which will index your home directory by default, allowing you
   to search immediately after indexing completes.

   Do not do this if your home directory contains a huge number of documents
   and you do not want to wait or are very short on disk space. In this case,
   you may want to edit the configuration file first to restrict the indexed
   area.

   Also be aware that you may need to install the appropriate supporting
   applications for document types that need them (for example antiword for
   ms-word files).

     ----------------------------------------------------------------------

1.2. Full text search

   Recoll is a full text search application. Full text search applications
   let you find your data by content rather than by external attributes (like
   a file name). More specifically, they will let you specify words (terms)
   that should or should not appear in the text you are looking for, and
   return a list of matching documents, ordered so that the most relevant
   documents will appear first.

   You do not need to remember in what file or email message you stored a
   given piece of information. You just ask for related terms, and the tool
   will return a list of documents where those terms are prominent, in a
   similar way to Internet search engines.

   Recoll tries to determine which documents are most relevant to the search
   terms you provide. Computer algorithms for determining relevance can be
   very complex, and in general are inferior to the power of the human mind
   to rapidly determine relevance. The quality of relevance guessing by the
   search tool is probably the most important element for a search
   application.

   In many cases, you are looking for all the forms of a word, not for a
   specific form or spelling. These different forms may include plurals,
   different tenses for a verb, or terms derived from the same root or stem
   (example: floor, floors, floored, flooring...). Recoll will by default
   expand queries to all such related terms (words that reduce to the same
   stem). This expansion can be disabled at search time.

   Stemming, by itself, does not accommodate for misspellings or phonetic
   searches. Recoll supports these features through a specific tool (the term
   explorer) which will let you explore the set of index terms along
   different modes.

     ----------------------------------------------------------------------

1.3. Recoll overview

   Recoll uses the Xapian information retrieval library as its storage and
   retrieval engine. Xapian is a very mature package using a sophisticated
   probabilistic ranking model. Recoll provides the interface to get data
   into (indexing) and out (searching) of the system.

   In practice, Xapian works by remembering where terms appear in your
   document files. The acquisition process is called indexing.

   The resulting index can be big (roughly the size of the original document
   set), but it is not a document archive. Recoll can only display documents
   that still exist at the place from which they were indexed. (Actually,
   there is a way to reconstruct a document from the information in the
   index, but the result is not nice, as all formatting, punctuation and
   capitalization are lost).

   Recoll stores all internal data in Unicode UTF-8 format, and it can index
   files with different character sets, encodings, and languages into the
   same index. It has input filters for many document types.

   Stemming depends on the document language. Recoll stores the unstemmed
   versions of terms and uses auxiliary databases for term expansion. It can
   switch stemming languages, or add a language, without re-indexing. Storing
   documents in different languages in the same index is possible, and useful
   in practice, but does introduce possibilities of confusion. Recoll
   currently makes no attempt at automatic language recognition.

   Recoll has many parameters which define exactly what to index, and how to
   classify and decode the source documents. These are kept in a
   configuration file. A default configuration is copied into a standard
   location (usually something like /usr/[local/]share/recoll/examples)
   during installation. The default parameters from this file may be
   overridden by values that you set inside your personal configuration,
   found by default in the .recoll sub-directory of your home directory. The
   default configuration will index your home directory with default
   parameters and should be sufficient for giving Recoll a try, but you may
   want to adjust it later.

   Indexing is started automatically the first time you execute the recoll
   search graphical user interface, or by executing the recollindex command.

   Searches are performed inside the recoll program, which has many options
   to help you find what you are looking for.

     ----------------------------------------------------------------------

                              Chapter 2. Indexing

2.1. Introduction

   Indexing is the process by which the set of documents is analyzed and the
   data entered into the database. Recoll indexing is normally incremental:
   documents will only be processed if they have been modified. On the first
   execution, of course, all documents will need processing. A full index
   build can be forced later by specifying an option to the indexing command
   (recollindex -z).

   Recoll indexing can be performed with two different methods:

     * Periodic indexing: indexing takes place at discrete times, by
       executing the recollindex command. The typical usage is to have a
       nightly indexing run programmed into your cron file.

     * Real time indexing: indexing takes place as soon as a file is created
       or changed. recollindex runs as a daemon and uses a file system
       alteration monitor such as Fam, Gamin or inotify do detect file
       changes. Monitoring a big directory tree can consume significant
       system resources.

   The choice between the two methods is mostly a matter of preference, and
   they can be combined by setting up multiple indexes (ie: use periodic
   indexing on a big documentation directory, and real time indexing on a
   small home directory). Monitoring a big file system tree can consume
   significant system resources, for dubious gains.

   

   Recoll knows about quite a few different document types. The parameters
   for document types recognition and processing are set in configuration
   files Most file types, like HTML or word processing files, only hold one
   document. Some file types, like mail folder files can hold many
   individually indexed documents.

   Recoll indexing processes plain text, HTML, openoffice and e-mail files
   internally. Other types (ie: postscript, pdf, ms-word, rtf) need external
   applications for preprocessing. The list is in the installation section.

   Without further configuration, Recoll will index all appropriate files
   from your home directory, with a reasonable set of defaults.

   In some cases, it may be interesting to index different areas of the file
   system to separate databases. You can do this by using multiple
   configuration directories, each indexing a file system area to a specific
   database. See the section about using multiple databases for more
   information on multiple configurations and indexes.

     ----------------------------------------------------------------------

2.2. Index storage

   The default location for the index data is the xapiandb subdirectory of
   the Recoll configuration directory, typically $HOME/.recoll/xapiandb/.
   This can be changed via two different methods (with different purposes):

     * You can specify a different configuration directory by setting the
       RECOLL_CONFDIR environment variable, or using the -c option to the
       Recoll commands. This method would typically be used to index
       different areas of the file system to different indexes. For example,
       if you were to issue the following commands:

 export RECOLL_CONFDIR=~/.indexes-email
 recoll
         

       Then Recoll would use configuration files stored in ~/.indexes-email/
       and, (unless specified otherwise in recoll.conf) would look for the
       index in ~/.indexes-email/xapiandb/.

       Using multiple configuration directories and configuration options
       allows you to tailor multiple configurations and indexes to handle
       whatever subset of the available data that you wish to make
       searchable.

     * You can also specify a different storage location for the index by
       setting the dbdir parameter in the configuration file (see the
       configuration section). This method would mainly be of use if you
       wanted to keep the configuration directory in its default location,
       but desired another location for the index, typically out of disk
       occupation concerns.

   The size of the index is determined by the size of the set of documents,
   but the ratio can vary a lot. For a typical mixed set of documents, the
   index size will often be close to the data set size. In specific cases (a
   set of compressed mbox files for example), the index can become much
   bigger than the documents. It may also be much smaller if the documents
   contain a lot of images or other non-indexed data (an extreme example
   being a set of mp3 files where only the tags would be indexed).

   Of course, images, sound and video do not increase the index size, which
   means that it will be quite typical nowadays (2006), that even a big index
   will be negligible against the total amount of data on the computer.

   The index data directory (xapiandb) only contains data that can be
   completely rebuilt by an index run, and it can always be destroyed safely.

     ----------------------------------------------------------------------

  2.2.1. Index formats

   Xapian has had two possible index formats for quite some time. The "old"
   one named Quartz, and the new one named Flint. Xapian 0.9 used Quartz by
   default, but could use Flint if a specific environment variable
   (XAPIAN_PREFER_FLINT) was set. Xapian 1.0 still supports Quartz but will
   use Flint by default for new index creations.

   The number of disk accesses performed during indexing has been much
   optimized in the new Flint engine and you may see indexing times improved
   by 50% in some cases (compared to Quartz), typically for big indexes where
   disk accesses dominate the indexing time. There is also a more modest
   improvement of index size.

   Xapian will not convert automatically an existing index from the Quartz to
   the Flint format. If you have an older index and want to take advantage of
   the new format (which can be done without setting the environment variable
   as of Recoll 1.8.2 and Xapian 1.0.0), you will have to explicitely delete
   the old index, then run a normal indexing process.

   Unfortunately, using the -z option to recollindex is not sufficient to
   change the format, you have to delete all files inside the index directory
   (typically ~/.recoll/xapiandb) before starting indexing.

     ----------------------------------------------------------------------

  2.2.2. Security aspects

   The Recoll index does not hold copies of the indexed documents. But it
   does hold enough data to allow for an almost complete reconstruction. If
   confidential data is indexed, access to the database directory should be
   restricted.

   As of version 1.4, Recoll will create the configuration directory with a
   mode of 0700 (access by owner only). As the index data directory is by
   default a sub-directory of the configuration directory, this should result
   in appropriate protection.

   If you use another setup, you should think of the kind of protection you
   need for your index, and set the directory and files access modes
   appropriately.

     ----------------------------------------------------------------------

2.3. The indexing configuration

   You can control which areas of the file system are indexed, and how files
   are processed, by setting variables inside the Recoll configuration files.

   You can also use multiple indexes defined by separate configurations,
   typically to separate personal and shared indexes, or to take advantage of
   the organization of your data to improve search precision.

   The first time you start recoll, you will be asked whether or not you
   would like recoll to build the index. If you want to adjust the
   configuration before indexing, just click Cancel at this point. That way,
   recoll will have created a ~/.recoll directory containing empty
   configuration files.

   The configuration is documented inside the installation chapter of this
   document, or in the recoll.conf(5) man page, but the most current
   information will most likely be the comments inside the sample file. The
   most immediately useful variable you may interested in is probably
   topdirs, which determines what subtrees get indexed.

   The applications needed to index file types other than text, HTML or email
   (ie: pdf, postscript, ms-word...) are described in the external packages
   section

     ----------------------------------------------------------------------

2.4. Periodic indexing

  2.4.1. Starting indexing

   Indexing is performed either by the recollindex program, or by the
   indexing thread inside the recoll program (use the File menu). Both
   programs will use of the RECOLL_CONFDIR variable or accept a -c confdir
   option to specify the configuration directory to be used.

   If the recoll program finds no index when it starts, it will automatically
   start indexing (except if canceled).

   It is best to avoid interrupting the indexing process, as this may
   sometimes leave the index in a bad state. This is not a serious problem,
   as you then just need to delete the index files and restart the indexing.
   The index files are normally stored in the $HOME/.recoll/xapiandb
   directory, which you can just delete if needed. Alternatively, you can
   start recollindex with option -z, which will reset the database before
   indexing.

     ----------------------------------------------------------------------

  2.4.2. Using cron to automate indexing

   The most common way to set up indexing is to have a cron task execute it
   every night. For example the following crontab entry would do it every day
   at 3:30AM (supposing recollindex is in your PATH):

 30 3 * * * recollindex > /tmp/recolltrace 2>&1

   The usual command to edit your crontab is crontab -e (which will usually
   start the vi editor to edit the file). You may have more sophisticated
   tools available on your system.

     ----------------------------------------------------------------------

2.5. Real time indexing

   Real time monitoring/indexing is performed by starting the recollindex -m
   command. With this option, recollindex will detach from the terminal and
   become a daemon, permanently monitoring file changes and updating the
   index.

   The real time indexing support can be customised during package
   configuration with the --with[out]-fam or --with[out]-inotify options. The
   default is currently to include inotify monitoring on systems that support
   it.

   The rclmon.sh script can be used to easily start and stop the daemon. It
   can be found in the examples directory (typically
   /usr/local/[share/]recoll/examples).

   Starting the daemon is normally performed as part of the user session
   script. For example, my out of fashion xdm-based session has a .xsession
   script with the following lines at the end:

 recollconf=$HOME/.recoll-home
 recolldata=/usr/local/share/recoll
 RECOLL_CONFDIR=$recollconf $recolldata/examples/rclmon.sh start

 fvwm 

   The indexing daemon gets started, then the window manager, for which the
   session waits.

   By default the indexing daemon will monitor the state of the X11 session,
   and exit when it finishes, it is not necessary to kill it explicitely.
   (The X11 server monitoring can be disabled with option -x to recollindex).

   Under KDE, you can place a small script to start recollindex -m under
   $HOME/.kde/Autostart. This will be executed when the session begins.

   There is a similar mechanism under Gnome (find the session control tool in
   the menus and use the "Startup programs" tab).

   By default, the indexing daemon will write its messages to a file inside
   the configuration directory (this is controlled by the daemlogfilename and
   daemloglevel configuration parameters). You may want to change this. Also
   the log file will only be truncated when the daemon starts. If the daemon
   runs permanently, the log file may grow quite big, depending on the log
   level.

   While it is convenient that data is indexed in real time, repeated
   indexing can generate a significant load on the system when files such as
   email folders change. You probably do not want to enable it if your system
   is short on resources. Periodic indexing is adequate in most cases.

     ----------------------------------------------------------------------

                              Chapter 3. Searching

   The recoll program provides the user interface for searching. It is based
   on the QT library.

     ----------------------------------------------------------------------

3.1. Simple search

    1. Start the recoll program.

    2. Possibly choose a search mode: Any term or All terms or File name.

    3. Enter search term(s) in the text field at the top of the window.

    4. Click the Search button or hit the Enter key to start the search.

   The initial default search mode is All terms. This will look for documents
   containing all of the search terms (the ones with more terms will get
   better scores). Any term will search for documents where at least one of
   the terms appear. File name will specifically look for file names.

   The fourth entry (Query Language) is described in its own section.

   All search modes allow wildcards inside terms (*, ?, []). You may want to
   have a look at the section about wildcards for more information about
   this.

   You can search for exact phrases (adjacent words in a given order) by
   enclosing the input inside double quotes. Ex: "virtual reality".

   Character case has no influence on search, except that you can disable
   stem expansion for any term by capitalizing it. Ie: a search for floor
   will also normally look for flooring, floored, etc., but a search for
   Floor will only look for floor, in any character case (stemming can also
   be disabled globally in the preferences).

   Recoll remembers the last few searches that you performed. You can use the
   simple search text entry widget (a combobox) to recall them (click on the
   thing at the right of the text field). Please note, however, that only the
   search texts are remembered, not the mode (all/any/file name).

   Typing Esc Space while entering a word in the simple search entry will
   open a window with possible completions for the word. The completions are
   extracted from the database.

   Double-clicking on a word in the result list or a preview window will
   insert it into the simple search entry field.

   Note that, apart from wildcard characters (single ? characters are ok),
   you can cut and paste any text into an All terms or Any term search field,
   punctuation, newlines and all. Recoll will process it and produce a
   meaningful search. This is what most differentiates this mode from the
   Query Language mode, where you have to care about the syntax.

   You can use the Tools / Advanced search dialog for more complex searches.

     ----------------------------------------------------------------------

3.2. The result list

   After starting a search, a list of results will instantly be displayed in
   the main list window.

   By default, the document list is presented in order of relevance (how well
   the system estimates that the document matches the query). You can specify
   a different ordering by using the Tools / Sort parameters dialog.

   Clicking on the Preview link for an entry will open an internal preview
   window for the document. Further Preview clicks for the same search will
   open tabs in the existing preview window. You can use Shift+Click to force
   the creation of another preview window, which may be useful to view the
   documents side by side. (You can also browse successive results in a
   single preview window by typing Shift+ArrowUp/Down in the window).

   Clicking the Edit link will attempt to start an external viewer. The
   viewers can be configured through the user preferences dialog, or by
   editing the mimeview configuration file.

   The Preview and Edit edit links may not be present for all entries,
   meaning that Recoll has no configured way to preview a given file type
   (which was indexed by name only), or no configured external viewer for the
   file type. This can sometimes be adjusted simply by tweaking the mimemap
   and mimeview configuration files (the latter can be modified with the user
   preferences dialog).

   You can click on the Query details link at the top of the results page to
   see the query actually performed, after stem expansion and other
   processing.

   Double-clicking on any word inside the result list or a preview window
   will insert it into the simple search text.

   The result list is divided into pages (the size of which you can change in
   the preferences). Use the arrow buttons in the toolbar or the links at the
   bottom of the page to browse the results.

     ----------------------------------------------------------------------

  3.2.1. The result list right-click menu

   Apart from the preview and edit links, you can display a pop-up menu by
   right-clicking over a paragraph in the result list. This menu has the
   following entries:

     * Preview

     * Edit

     * Copy File Name

     * Copy Url

     * Find similar

     * Find similar

     * Parent document

   The Preview and Edit entries do the same thing as the corresponding links.

   The Copy File Name and Copy Url copy the relevant data to the clipboard,
   for later pasting.

   The Find similar entry will select a number of relevant term from the
   current document and enter them into the simple search field. You can then
   start a simple search, with a good chance of finding documents related to
   the current result.

   The Parent document entry will appear for documents which are not actually
   files but are part of, or attached to, a higher level document. This entry
   is mainly useful for email attachments and permits viewing the message to
   which the document is attached. Note that the entry will also appear for
   an email which is part of an mbox folder file, but that you can't actually
   visualize the folder (there will be an error dialog if you try). Recoll is
   unfortunately not yet smart enough to disable the entry in this case.

     ----------------------------------------------------------------------

3.3. The preview window

   The preview window opens when you first click a Preview link inside the
   result list.

   Subsequent preview requests for a given search open new tabs in the
   existing window (except if you hold the Shift key while clicking which
   will open a new window for side by side viewing).

   Starting another search and requesting a preview will create a new preview
   window. The old one stays open until you close it.

   You can close a preview tab by typing ^W (Ctrl + W) in the window. Closing
   the last tab for a window will also close the window.

   Of course you can also close a preview window by using the window manager
   button in the top of the frame.

   You can display successive or previous documents from the result list
   inside a preview tab by typing Shift+Down or Shift+Up (Down and Up are the
   arrow keys).

   The preview tabs have an internal incremental search function. You
   initiate the search either by typing a / (slash) inside the text area or
   by clicking into the Search for: text field and entering the search
   string. You can then use the Next and Previous buttons to find the
   next/previous occurrence. You can also type F3 inside the text area to get
   to the next occurrence.

   If you have a search string entered and you use ^Up/^Down to browse the
   results, the search is initiated for each successive document. If the
   string is found, the cursor will be positioned at the first occurrence of
   the search string.

     ----------------------------------------------------------------------

3.4. The query language

   The query language processor is activated on the simple search entry when
   the search mode selector is set to Query Language.

   Here follows a sample request that we are going to explain:

           author:"john doe" Beatles OR Lennon Live OR Unplugged -potatoes
     

   This would search for all documents with John Doe appearing as a phrase in
   the author field (exactly what this is would depend on the document type,
   ie: the From: header, for an email message), and containing either beatles
   or lennon and either live or unplugged but not potatoes (in any part of
   the document).

   All elements in the search entry are normally combined with an implicit
   AND. It is possible to specify that elements be OR'ed instead, as in
   Beatles OR Lennon. The OR must be entered literally (capitals), and it has
   priority over the AND associations: word1 word2 OR word3 means word1 AND
   (word2 OR word3) not (word1 AND word2) OR word3. Do not enter explicit
   parenthesis, they are not supported for now.

   An entry preceded by a - specifies a term that should not appear.

   The first element in the above exemple, author:"john doe" is a phrase
   search limited to a specific field. Phrase searches are specified as usual
   by enclosing the words in double quotes. The field specification appears
   before the colon (of course this is not limited to phrases, author:Balzac
   would be ok too). Recoll currently manages the following fields:

     * title, subject or caption are synonyms which specify data to be
       searched for in the document title or subject.

     * author or from for searching the documents originators.

     * keyword for searching the document specified keywords (few documents
       actually have any).

   As of release 1.9, the filters have the possibility to create other fields
   with arbitrary names. No standard filters use this possibility yet.

   There are two other elements which may be specified through the field
   syntax, but are somewhat special:

     * ext for specifying the file name extension (Ex: ext:html)

     * mime for specifying the mime type. This one is quite special because
       you can specify several values which will be OR'ed (the normal default
       for the language is AND). Ex: mime:text/plain mime:text/html.
       Specifying an explicit boolean operator or negation (-) before a mime
       specification is not supported and will produce strange results.

   The query language is currently the only way to use the Recoll field
   search capability.

   Words inside phrases and capitalized words are not stem-expanded.
   Wildcards may be used anywhere inside a term. Specifying a wild-card on
   the left of a term can produce a very slow search.

   You can use the show query link at the top of the result list to check the
   exact query which was finally executed by Xapian.

     ----------------------------------------------------------------------

3.5. Complex/advanced search

   The advanced search dialog has a number of fields that will allow a more
   refined search. Each entry field is configurable for the following modes:

     * All terms.

     * Any term.

     * None of the terms.

     * Phrase (exact terms in order within an adjustable window).

     * Proximity (terms in any order within an adjustable window).

     * Filename search with wildcards.

   Additional entry fields can be created by clicking the Add clause button.

   You can choose that all relevant fields will be combined by either an AND
   or an OR conjunction. All types of clauses except "phrase" and "near" can
   accept a mix of single words and phrases enclosed in double quotes.
   Stemming expansion will be performed for all terms not beginning with a
   capital letter, except for terms inside "phrase" clauses. Wildcards will
   be processed everywhere.

   Advanced search will also let you search for documents of specific mime
   types (ie: only text/plain, or text/HTML or application/pdf etc...). The
   state of the file type selection can be saved as the default (the file
   type filter will not be activated at program start-up, but the lists will
   be in the restored state).

   You can also restrict the search results to a sub-tree of the indexed
   area. If you need to do this often, you may think of setting up multiple
   indexes instead, as the performance will be much better.

   Click on the Start Search button in the advanced search dialog, or type
   Enter in any text field to start the search. The button in the main window
   always performs a simple search.

   Click on the Show query details link at the top of the result page to see
   the query expansion.

     ----------------------------------------------------------------------

3.6. The term explorer tool

   Recoll automatically manages the expansion of search terms to their
   derivatives (ie: plural/singular, verb inflections). But there are other
   cases where the exact search term is not known. For example, you may not
   remember the exact spelling, or only know the beginning of the name.

   The term explorer tool (started from the toolbar icon or from the Term
   explorer entry of the Tools menu) can be used to search the full index
   terms list. It has three modes of operations:

   Wildcard

           In this mode of operation, you can enter a search string with
           shell-like wildcards (*, ?, []). ie: xapi* would display all index
           terms beginning with xapi. (More about wildcards here).

   Regular expression

           This mode will accept a regular expression as input. Example:
           word[0-9]+. The expression is implicitely anchored at the
           beginning. Ie: press will match pression but not expression. You
           can use .*press to match the latter, but be aware that this will
           cause a full index term list scan, which can be quite long.

   Stem expansion

           This mode will perform the usual stem expansion normally done as
           part user input processing. As such it is probably mostly useful
           to demonstrate the process.

   Spelling/Phonetic

           In this mode, you enter the term as you think it is spelled, and
           Recoll will do its best to find index terms that sound like your
           entry. This mode uses the Aspell spelling application, which must
           be installed on your system for things to work (if your documents
           contain non-ascii characters, Recoll needs an aspell version newer
           than 0.60 for UTF-8 support). The language which is used to build
           the dictionary out of the index terms (which is done at the end of
           an indexing pass) is the one defined by your NLS environment.
           Weird things will probably happen if languages are mixed up.

   Note that in cases where Recoll does not know the beginning of the string
   to search for (ie a wildcard expression like *coll), the expansion can
   take quite a long time because the full index term list will have to be
   processed. The expansion is currently limited at 200 results for wildcards
   and regular expressions.

   Double-clicking on a term in the result list will insert it into the
   simple search entry field. You can also cut/paste between the result list
   and any entry field (the end of lines will be taken care of).

     ----------------------------------------------------------------------

3.7. More about wildcards

   All words entered in Recoll search fields will be processed for wildcard
   expansion before the request is finally executed.

   The wildcard characters are:

     * * which matches 0 or more characters.

     * ? which matches a single character.

     * [] which allow defining sets of characters to be matched (ex: [abc]
       matches a single character which may be 'a' or 'b' or 'c', [0-9]
       matches any number.

   You should be aware of a few things before using wildcards.

     * Using a wildcard character at the beginning of a word can make for a
       slow search because Recoll will have to scan the whole index term list
       to find the matches.

     * Using a * at the end of a word can produce more matches than you would
       think, and strange search results. You can use the term explorer tool
       to check what completions exist for a given term. You can also see
       exactly what search was performed by clicking on the link at the top
       of the result list. In general, for natural language terms, stem
       expansion will produce better results than an ending * (stem expansion
       is turned off when any wildcard character appears in the term).

     ----------------------------------------------------------------------

3.8. Multiple databases

   Multiple Recoll databases or indexes can be created by using several
   configuration directories which are usually set to index different areas
   of the file system. A specific index can be selected for updating or
   searching, using the RECOLL_CONFDIR environment variable or the -c option
   to recoll and recollindex.

   A recollindex program instance can only update one specific index.

   A recoll program instance is also associated with a specific index, which
   is the one to be updated by its indexing thread, but it can use any number
   of Recoll indexes for searching. The external indexes can be selected
   through the external indexes tab in the preferences dialog.

   Index selection is performed in two phases. A set of all usable indexes
   must first be defined, and then the subset of indexes to be used for
   searching. Of course, these parameters are retained across program
   executions (there are kept separately for each Recoll configuration). The
   set of all indexes is usually quite stable, while the active ones might
   typically be adjusted quite frequently.

   The main index (defined by RECOLL_CONFDIR) is always active. If this is
   undesirable, you can set up your base configuration to index an empty
   directory.

   As building the set of all indexes can be a little tedious when done
   through the user interface, you can use the RECOLL_EXTRA_DBS environment
   variable to provide an initial set. This might typically be set up by a
   system administrator so that every user does not have to do it. The
   variable should define a colon-separated list of index directories, ie:

 export RECOLL_EXTRA_DBS=/some/place/xapiandb:/some/other/db

   A typical usage scenario for the multiple index feature would be for a
   system administrator to set up a central index for shared data, that you
   choose to search or not in addition to your personal data. Of course,
   there are other possibilities. There are many cases where you know the
   subset of files that should be searched, and where narrowing the search
   can improve the results. You can achieve approximately the same effect
   with the directory filter in advanced search, but multiple indexes will
   have much better performance and may be worth the trouble.

     ----------------------------------------------------------------------

3.9. Document history

   Documents that you actually view (with the internal preview or an external
   tool) are entered into the document history, which is remembered.

   You can display the history list by using the Tools/Doc History menu
   entry.

   You can erase the document history by using the Erase document history
   entry in the File menu.

     ----------------------------------------------------------------------

3.10. Sorting search results

   The documents in a result list are normally sorted in order of relevance.
   It is possible to specify different sort parameters by using the Sort
   parameters dialog (located in the Tools menu).

   The tool sorts a specified number of the most relevant documents in the
   result list, according to specified criteria. The currently available
   criteria are date and mime type.

   The sort parameters stay in effect until they are explicitly reset, or the
   program exits. An activated sort is indicated in the result list header.

   Sort parameters are remembered between program invocations, but result
   sorting is normally always inactive when the program starts. It is
   possible to keep the sorting activation state between program invocations
   by checking the Remember sort activation state option in the preferences.

     ----------------------------------------------------------------------

3.11. Search tips, shortcuts

   Term completion. Typing Esc Space in the simple search entry field while
   entering a word will either complete the current word if its beginning
   matches a unique term in the index, or open a window to propose a list of
   completions.

   Picking up new terms from result or preview text. Double-clicking on a
   word in the result list or in a preview window will copy it to the simple
   search entry field.

   Disabling stem expansion. Entering a capitalized word in any search field
   will prevent stem expansion (no search for gardening if you enter Garden
   instead of garden). This is the only case where character case should make
   a difference for a Recoll search. You can also disable stem expansion or
   change the stemming language in the preferences.

   Phrases. A phrase can be looked for by enclosing it in double quotes.
   Example: "user manual" will look only for occurrences of user immediately
   followed by manual. You can use the This exact phrase field of the
   advanced search dialog to the same effect. Phrases can be entered along
   simple terms in all simple or advanced search entry fields (except This
   exact phrase).

   Browsing the result list inside a preview window (1.5). Entering
   Shift-Down or Shift-Up (Shift + an arrow key) in a preview window will
   display the next or the previous document from the result list. Any
   secondary search currently active will be executed on the new document.

   Forced opening of a preview window (1.6). You can use Shift+Click on a
   result list Preview link to force the creation of a preview window instead
   of a new tab in the existing one.

   AutoPhrases (1.5). This option can be set in the preferences dialog. If it
   is set, a phrase will be automatically built and added to simple searches
   when looking for Any terms. This will not change radically the results,
   but will give a relevance boost to the results where the search terms
   appear as a phrase. Ie: searching for virtual reality will still find all
   documents where either virtual or reality or both appear, but those which
   contain virtual reality should appear sooner in the list.

   Finding related documents. Selecting the Find similar documents entry in
   the result list paragraph right-click menu will select a set of
   "interesting" terms from the current result, and insert them into the
   simple search entry field. You can then possibly edit the list and start a
   search to find documents which may be apparented to the current result.

   File names. File names are added as terms during indexing, and you can
   specify them as ordinary terms in normal search fields (Recoll used to
   index all directories in the file path as terms. This has been abandoned
   as it did not seem really useful). Alternatively, you can use the specific
   file name search which will only look for file names and can use wildcard
   expansion.

   Query explanation. You can get an exact description of what the query
   looked for, including stem expansion, and Boolean operators used, by
   clicking on the result list header.

   Closing previews. Entering ^W in a tab will close it (and, for the last
   tab, close the preview window). Entering Esc will close the preview window
   and all its tabs.

   Quitting. Entering ^Q almost anywhere will close the application.

     ----------------------------------------------------------------------

3.12. Customizing the search interface

   It is possible to customize some aspects of the search interface by using
   Query configuration entry in the Preferences menu.

   There are two tabs in the dialog, dealing with the interface itself, and
   with the parameters used for searching and returning results.

   User interface parameters:

     * Number of results in a result page

     * Result list font: There is quite a lot of information shown in the
       result list, and you may want to customize the font and/or font size.
       The rest of the fonts used by Recoll are determined by your generic QT
       config (try the qtconfig command.

     * Result paragraph format string: allows you to change the presentation
       of each result list entry. This is a qt-html string where the
       following printf-like % substitutions will be performed:

          * %A. Abstract

          * %D. Date

          * %I. Icon image name

          * %K. Keywords (if any)

          * %L. Preview and Edit links

          * %M. Mime type

          * %N. result Number

          * %R. Relevance percentage

          * %S. Size information

          * %T. Title

          * %U. Url

       The default value for the string is:

 <img src="%I" align="left">%R %S %L &nbsp;&nbsp;<b>%T</b><br>
 %M&nbsp;%D&nbsp;&nbsp;&nbsp;<i>%U</i><br>
 %A %K
       

       You may, for example, try the following for a more web-like
       experience:

 <u><b><a href="P%N">%T</a></b></u><br>
 %A<font color=#008000>%U - %S</font> - %L
       

       Or the clean looking:

 <img src="%I" align="left">%L <font color="#900000">%R</font>
   <b>%T</b><br>%S 
 <font color="#808080"><i>%U</i></font>
 <table bgcolor="#e0e0e0">
 <tr><td><div>%A</div></td></tr>
 </table>%K
       

       The format of the Preview and Edit links is <a href="Pdocnum"> and <a
       href="Edocnum"> where docnum is what %N would print. This makes the
       title a preview link in the above format.

       Please note that, due to the way the program handles right mouse
       clicks in the result list, if the custom formatting results in
       multiple paragraphs per result, right clicks will only work inside the
       first one.

     * HTML help browser: this will let you chose your preferred browser
       which will be started from the Help menu to read the user manual. You
       can enter a simple name if the command is in your PATH, or browse for
       a full pathname.

     * Auto-start simple search on white space entry: if this is checked, a
       search will be executed each time you enter a space in the simple
       search input field. This lets you look at the result list as you enter
       new terms. This is off by default, you may like it or not...

     * Start with advanced search dialog open and Start with sort dialog
       open: If you use these dialogs all the time, checking these entries
       will get them to open when recoll starts.

     * Use desktop preferences to choose document editor: if this is checked,
       the xdg-open utility will be used to open files when you click the
       Edit link in the result list, instead of the application defined in
       mimeview. xdg-open will in term use your desktop preferences to choose
       an appropriate application.

   Search parameters:

     * Stemming language: stemming obviously depends on the document's
       language. This listbox will let you chose among the stemming databases
       which were built during indexing (this is set in the main
       configuration file), or later added with recollindex -s (See the
       recollindex manual). Stemming languages which are dynamically added
       will be deleted at the next indexing pass unless they are also added
       in the configuration file.

     * Dynamically build abstracts: this decides if Recoll tries to build
       document abstracts when displaying the result list. Abstracts are
       constructed by taking context from the document information, around
       the search terms. This can slow down result list display significantly
       for big documents, and you may want to turn it off.

     * Replace abstracts from documents: this decides if we should synthesize
       and display an abstract in place of an explicit abstract found within
       the document itself.

     * Synthetic abstract size: adjust to taste...

     * Synthetic abstract context words: how many words should be displayed
       around each term occurrence.

   External indexes: This panel will let you browse for additional indexes
   that you may want to search. External indexes are designated by their
   database directory (ie: /home/someothergui/.recoll/xapiandb,
   /usr/local/recollglobal/xapiandb).

   Once entered, the indexes will appear in the External indexes list, and
   you can chose which ones you want to use at any moment by checking or
   unchecking their entries.

   Your main database (the one the current configuration indexes to), is
   always implicitly active. If this is not desirable, you can set up your
   configuration so that it indexes, for example, an empty directory.

     ----------------------------------------------------------------------

                            Chapter 4. Installation

4.1. Installing a prebuilt copy

   Recoll binary packages from the Recoll web site are always linked
   statically to the Xapian libraries, and have no other dependencies. You
   will only have to check or install supporting applications for the file
   types that you want to index beyond text, HTML and mail files, and maybe
   have a look at the configuration section (but this may not be necessary
   for a quick test with default parameters).

     ----------------------------------------------------------------------

  4.1.1. Installing through a package system

   If you use a BSD-type port system or a prebuilt package (RPM or other),
   just follow the usual procedure for your system.

     ----------------------------------------------------------------------

  4.1.2. Installing a prebuilt Recoll

   The unpackaged binary versions on the Recoll web site are just compressed
   tar files of a build tree, where only the useful parts were kept
   (executables and sample configuration).

   The executable binary files are built with a static link to libxapian and
   libiconv, to make installation easier (no dependencies).

   After extracting the tar file, you can proceed with installation as if you
   had built the package from source (that is, just type make install). The
   binary trees are built for installation to /usr/local.

     ----------------------------------------------------------------------

4.2. Supporting packages

   Recoll uses external applications to index some file types. You need to
   install them for the file types that you wish to have indexed (these are
   run-time dependencies. None is needed for building Recoll):

     * Openoffice: supported natively, but needs the unzip command to be
       installed.

     * PDF: pdftotext is part of the Xpdf package.

     * Postscript: pstotext.

     * MS Word: antiword.

     * MS Excel and PowerPoint: catdoc.

     * RTF: unrtf

     * dvi: dvips

     * djvu: DjVuLibre

     * MP3: Recoll will use the id3info command from the id3lib package to
       extract tag information. Without it, only the file names will be
       indexed.

   Text, HTML, mail folders Openoffice and Scribus files are processed
   internally. Lyx is used to index Lyx files. Many filters need sed and awk.

     ----------------------------------------------------------------------

4.3. Building from source

  4.3.1. Prerequisites

   At the very least, you will need to download and install the xapian core
   package (Recoll 1.9 normally uses version 1.0.2, but any 0.9 or 1.0.x
   version will work too), and the qt run-time and development packages
   (Recoll development currently uses version 3.3.5, but any 3.3 version is
   probably OK).

   You will most probably be able to find a binary package for qt for your
   system. You may have to compile Xapian but this is not difficult (if you
   are using FreeBSD, there is a port).

   You may also need libiconv. Recoll currently uses version 1.9 (this should
   not be critical). On Linux systems, the iconv interface is part of libc
   and you should not need to do anything special.

     ----------------------------------------------------------------------

  4.3.2. Building

   Recoll has been built on Linux (redhat7.3, mandriva 2005/6, Fedora Core
   3/4/5/6), FreeBSD 5/6, macosx, and Solaris 8. If you build on another
   system, and need to modify things, I would very much welcome patches.

   Depending on the qt configuration on your system, you may have to set the
   QTDIR and QMAKESPECS variables in your environment:

     * QTDIR should point to the directory above the one that holds the qt
       include files (ie: if qt.h is /usr/local/qt/include/qt.h, QTDIR should
       be /usr/local/qt).

     * QMAKESPECS should be set to the name of one of the qt mkspecs
       sub-directories (ie: linux-g++).

   On many Linux systems, QTDIR is set by the login scripts, and QMAKESPECS
   is not needed because there is a default link in mkspecs/.

   Configure options: --without-aspell will disable the code for phonetic
   matching of search terms. --with-fam or --with-inotify will enable the
   code for real time indexing. Inotify support is enabled by default on
   recent Linux systems.

   Normal procedure:

         cd recoll-xxx
         configure
         make
         (practices usual hardship-repelling invocations)
     

   There little auto-configuration. The configure script will mainly link one
   of the system-specific files in the mk directory to mk/sysconf. If your
   system is not known yet, it will tell you as much, and you may want to
   manually copy and modify one of the existing files (the new file name
   should be the output of uname -s).

     ----------------------------------------------------------------------

  4.3.3. Installation

   Either type make install or execute recollinstall prefix, in the root of
   the source tree. This will copy the commands to prefix/bin and the sample
   configuration files, scripts and other shared data to prefix/share/recoll.

   If the installation prefix given to recollinstall is different from what
   was specified when executing configure, you will have to set the
   RECOLL_DATADIR environment variable to indicate where the shared data is
   to be found.

   You can then proceed to configuration.

     ----------------------------------------------------------------------

4.4. Configuration overview

   Most of the parameters specific to the recoll GUI are set through the
   Preferences menu and stored in the standard QT place ($HOME/.qt/recollrc).
   You probably do not want to edit this by hand.

   For other options, Recoll uses text configuration files. You will have to
   edit them by hand for now (there is still some hope for a GUI
   configuration tool in the future). The most accurate documentation for the
   configuration parameters is given by comments inside the default files,
   and we will just give a general overview here.

   There are two sets of configuration files. The system-wide files are kept
   in a directory named like /usr/[local/]share/recoll/examples, they define
   default values for the system. A parallel set of files exists by default
   in the .recoll directory in your home. This directory can be changed with
   the RECOLL_CONFDIR environment variable or the -c option parameter to
   recoll and recollindex.

   If the .recoll directory does not exist when recoll or recollindex are
   started, it will be created with a set of empty configuration files.
   recoll will give you a chance to edit the configuration file before
   starting indexing. recollindex will proceed immediately. To avoid
   mistakes, the automatic directory creation will only occur for the default
   location, not if -c or RECOLL_CONFDIR were used (in the latter cases, you
   will have to create the directory).

   All configuration files share the same format. For example, a short
   extract of the main configuration file might look as follows:

         # Space-separated list of directories to index.
         topdirs =  ~/docs /usr/share/doc

         [~/somedirectory-with-utf8-txt-files]
         defaultcharset = utf-8
       

   There are three kinds of lines:

     * Comment (starts with #) or empty.

     * Parameter affectation (name = value).

     * Section definition ([somedirname]).

   Section definitions allow redefining some parameters for a directory
   sub-tree. They stay in effect until another section definition, or the end
   of file, is encountered. Some of the parameters used for indexing are
   looked up hierarchically from the current directory location upwards. Not
   all parameters can be meaningfully redefined, this is specified for each
   in the next section.

   When found at the beginning of a file path, the tilde character (~) is
   expanded to the name of the user's home directory, as a shell would do.

   White space is used for separation inside lists. List elements with
   embedded spaces can be quoted using double-quotes.

     ----------------------------------------------------------------------

  4.4.1. Main configuration file

   recoll.conf is the main configuration file. It defines things like what to
   index (top directories and things to ignore), and the default character
   set to use for document types which do not specify it internally.

   The default configuration will index your home directory. If this is not
   appropriate, start recoll to create a blank configuration, click Cancel,
   and edit the configuration file before restarting the command. This will
   start the initial indexing, which may take some time.

   Paramers:

   topdirs

           Specifies the list of directories or files to index (recursively
           for directories). The indexer will not follow symbolic links
           inside the indexed trees. If an entry in the topdirs list is a
           symbolic link, indexing will not start and will generate an error.

   dbdir

           The name of the Xapian data directory. It will be created if
           needed when the index is initialized. If this is not an absolute
           path, it will be interpreted relative to the configuration
           directory. The value can have embedded spaces but starting or
           trailing spaces will be trimmed. You cannot use quotes here.

   skippedNames

           A space-separated list of patterns for names of files or
           directories that should be completely ignored. The list defined in
           the default file is:

 skippedNames = #* bin CVS  Cache cache* caughtspam  tmp .thumbnails .svn \
          *~ recollrc

           The list can be redefined for sub-directories, but is only
           actually changed for the top level ones in topdirs.

           The top-level directories are not affected by this list (that is,
           a directory in topdirs might match and would still be indexed).

           The list in the default configuration does not exclude hidden
           directories (names beginning with a dot), which means that it may
           index quite a few things that you do not want. On the other hand,
           mail user agents like thunderbird usually store messages in hidden
           directories, and you probably want this indexed. One possible
           solution is to have .* in skippedNames, and add things like
           ~/.thunderbird or ~/.evolution in topdirs.

   skippedPaths and daemSkippedPaths

           A space-separated list of patterns for paths of files or
           directories that should be skipped. There is no default in the
           sample configuration file, but the code always adds the
           configuration and database directories in there.

           skippedPaths is used both by batch and real time indexing.
           daemSkippedPaths can be used to specify things that should be
           indexed at startup, but not monitored.

           Example of use for skipping text files only in a specific
           directory:

 skippedPaths = ~/somedir/*.txt
             

   loglevel,daemloglevel

           Verbosity level for recoll and recollindex. A value of 4 lists
           quite a lot of debug/information messages. 2 only lists errors.
           The daemversion is specific to the indexing monitor daemon.

   logfilename, daemlogfilename

           Where the messages should go. 'stderr' can be used as a special
           value, and is the default. The daemversion is specific to the
           indexing monitor daemon.

   indexstemminglanguages

           A list of languages for which the stem expansion databases will be
           built. See recollindex(1) or use the recollindex -l command for
           possible values. You can add a stem expansion database for a
           different language by using recollindex -s, but it will be deleted
           during the next indexing. Only languages listed in the
           configuration file are permanent.

   defaultcharset

           The name of the character set used for files that do not contain a
           character set definition (ie: plain text files). This can be
           redefined for any sub-directory. If it is not set at all, the
           character set used is the one defined by the nls environment
           (LC_ALL, LC_CTYPE, LANG), or iso8859-1 if nothing is set.

   maxfsoccuppc

           Maximum file system occupation before we stop indexing. The value
           is a percentage, corresponding to what the "Capacity" df output
           column shows. The default value is 0, meaning no checking.

   idxflushmb

           Threshold (megabytes of new text data) where we flush from memory
           to disk index. Setting this can help control memory usage. A value
           of 0 means no explicit flushing, letting Xapian use its own
           default, which is flushing every 10000 documents (memory usage
           depends on average document size). The default value is 10.

   filtersdir

           A directory to search for the external filter scripts used to
           index some types of files. The value should not be changed, except
           if you want to modify one of the default scripts. The value can be
           redefined for any sub-directory.

   iconsdir

           The name of the directory where recoll result list icons are
           stored. You can change this if you want different images.

   guesscharset

           Decide if we try to guess the character set of files if no
           internal value is available (ie: for plain text files). This does
           not work well in general, and should probably not be used.

   usesystemfilecommand

           Decide if we use the file -i system command as a final step for
           determining the mime type for a file (the main procedure uses
           suffix associations as defined in the mimemap file). This can be
           useful for files with suffix-less names, but it will also cause
           the indexing of many bogus "text" files.

   indexallfilenames

           Recoll indexes file names in a special section of the database to
           allow specific file names searches using wild cards. This
           parameter decides if file name indexing is performed only for
           files with mime types that would qualify them for full text
           indexing, or for all files inside the selected subtrees,
           independently of mime type.

   idxabsmlen

           Recoll stores an abstract for each indexed file inside the
           database. This is so that they can be displayed inside the result
           lists without decoding the original file. This parameter defines
           the size of the stored abstract (which can come from an actual
           section or just be the beginning of the text). The default value
           is 250.

   aspellLanguage

           Language definitions to use when creating the aspell dictionary.
           The value must match a set of aspell language definition files.
           You can type "aspell config" to see where these are installed
           (look for data-dir). The default if the variable is not set is to
           use your desktop national language environment to guess the value.

   noaspell

           If this is set, the aspell dictionary generation is turned off.
           Useful for cases where you don't need the functionality or when it
           is unusable because aspell crashes during dictionary generation.

     ----------------------------------------------------------------------

  4.4.2. The mimemap file

   mimemap specifies the file name extension to mime type mappings.

   For file names without an extension, or with an unknown one, the system's
   file -i command will be executed to determine the mime type (this can be
   switched off inside the main configuration file).

   The mappings can be specified on a per-subtree basis, which may be useful
   in some cases. Example: gaim logs have a .txt extension but should be
   handled specially, which is possible because they are usually all located
   in one place.

   mimemap also has a recoll_noindex variable which is a list of suffixes.
   Matching files will be skipped (which avoids unnecessary decompressions or
   file executions). This is partially redundant with skippedNames in the
   main configuration file, with two differences: it will not affect
   directories, and it cannot be made dependant on the file-system location
   (it is a configuration-wide parameter). You could accomplish with
   skippedNames anything that recoll_noindex does. The latter is used mostly
   for things known to be unindexable by a given Recoll version. Having it
   there avoids cluttering the more user-oriented and locally customized
   skippedNames.

     ----------------------------------------------------------------------

  4.4.3. The mimeconf file

   mimeconf specifies how the different mime types are handled for indexing,
   and which icons are displayed in the recoll result lists.

   Changing the parameters in the [index] section is probably not a good idea
   except if you are a Recoll developer.

   The [icons] section allows you to change the icons which are displayed by
   recoll in the result lists (the values are the basenames of the png images
   inside the iconsdir directory (specified in recoll.conf).

     ----------------------------------------------------------------------

  4.4.4. The mimeview file

   mimeview specifies which programs are started when you click on an Edit
   link in a result list. Ie: HTML is normally displayed using firefox, but
   you may prefer Konqueror, your openoffice.org program might be named
   oofice instead of openoffice etc.

   Changes to this file can be done by direct editing, or through the recoll
   user preferences dialog.

   As for the other configuration files, the normal usage is to have a
   mimeview inside your own configuration directory, with just the
   non-default entries, which will override those from the central
   configuration file.

   Please note that these entries must be placed under a [view] section.

   If Use desktop preferences to choose document editor is checked in the
   user preferences, all mimeview entries will be ignored except the one
   labelled application/x-all (which is set to use xdg-open by default).

     ----------------------------------------------------------------------

  4.4.5. Examples of configuration adjustments

    4.4.5.1. Adding an external viewer for an non-indexed type

   Imagine that you have some kind of file which does not have indexable
   content, but for which you would like to have a functional Edit link in
   the result list (when found by file name). The file names end in .blob and
   can be displayed by application blobviewer.

   You need two entries in the configuration files for this to work:

     * In $RECOLL_CONFDIR/mimemap (typically ~/.recoll/mimemap), add the
       following line:

              application/x-blobapp = .blob
          

       Note that the mime type is made up here, and you could call it
       diesel/oil just the same.

     * In $RECOLL_CONFDIR/mimeview under the [view] section:

                  application/x-blobapp = blobviewer %f
             

       We are supposing that blobviewer wants a file name parameter here, you
       would use %u if it liked URLs better.

   If you just wanted to change the application used by Recoll to display a
   mime type which it already knows, you would just need to edit mimeview.
   The entries you add in your personal file override those in the central
   configuration, which you do not need to alter

     ----------------------------------------------------------------------

    4.4.5.2. Adding indexing support for a new file type

   Let us now imagine that the above .blob files actually contain indexable
   text and that you know how to extract it with a command line program.
   Getting Recoll to index the files is easy. You need to perform the above
   alteration, and also to add data to the mimeconf file (typically in
   ~/.recoll/mimeconf):

     * Under the [index] section, add the following line (more about the
       rclblob indexing script later):

                  application/x-blobapp = exec rclblob
             

     * Under the [icons] section, you should choose an icon to be displayed
       for the files inside the result lists. Icons are normally 64x64 pixels
       PNG files which live in /usr/[local/]share/recoll/images.

     * Under the [categories] section, you should add the mime type where it
       makes sense (you can also create a category). Categories may be used
       for filtering in advanced search.

   The rclblob filter should be an executable program or script which exists
   inside /usr/[local/]share/recoll/filters. It will be given a file name as
   argument and should output the text contents in html format on the
   standard output.

   You can find more details about writing a Recoll filter in the section
   about writing filters

     ----------------------------------------------------------------------

4.5. Extending Recoll

  4.5.1. Writing a document filter

   Recoll filters are executable programs which translate from a specific
   format (ie: openoffice, acrobat, etc.) to the Recoll indexing input
   format, which was chosen to be HTML.

   Recoll filters are usually shell-scripts, but this is in no way necessary.
   These programs are extremely simple and most of the difficulty lies in
   extracting the text from the native format, not outputting what is
   expected by Recoll. Happily enough, most document formats already have
   translators or text extractors which handle the difficult part and can be
   called from the filter.

   Filters are called with a single argument which is the source file name.
   They should output the result to stdout.

   The RECOLL_FILTER_FORPREVIEW environment variable (values yes, no) tells
   the filter if the operation is for indexing or previewing. Some filters
   use this to output a slightly different format. This is not essential.

   The output HTML could be very minimal like the following example:

 <html><head>
 <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
 </head>
 <body>some text content</body></html>
         

   You should take care to escape some characters inside the text by
   transforming them into appropriate entities. "&" should be transformed
   into "&amp;", "<" should be transformed into "&lt;".

   The character set needs to be specified in the header. It does not need to
   be UTF-8 (Recoll will take care of translating it), but it must be
   accurate for good results.

   Recoll will also make use of other header fields if they are present:
   title, description, keywords.

   As of Recoll release 1.9, filters also have the possibility to "invent"
   field names. This should be output as meta tags:

 <meta name="somefield" content="Some textual data" />

   In this case, a correspondance between field name and Xapian prefix should
   also be added to the mimeconf file. See the existing entries for
   inspiration. The field can then be used inside the query language to
   narrow searches.

   The easiest way to write a new filter is probably to start from an
   existing one.

     ----------------------------------------------------------------------
